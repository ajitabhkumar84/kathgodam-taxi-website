---
import Navbar from '../components/Navbar.astro';
import RouteHeroSlider from '../components/RouteHeroSlider.astro';
import SafetyBanner from '../components/SafetyBanner.astro';
import RoutePricingTable from '../components/RoutePricingTable.astro';
import AttractionsGrid from '../components/AttractionsGrid.astro';
import RouteFAQ from '../components/RouteFAQ.astro';
import StickyBookingSidebar from '../components/StickyBookingSidebar.astro';
import Footer from '../components/Footer.astro';
import BookingModalContainer from '../components/booking/BookingModalContainer';
import '../styles/global.css';

interface Props {
  routeData: {
    from: string;
    to: string;
    distance: string;
    duration: string;
    startingPrice: string;
    slug: string;
    _id: string;
    destinationLatitude?: number;
    destinationLongitude?: number;
    googleMapsEmbedUrl?: string;
  };
  heroSlides?: Array<{
    image: string;
    title: string;
    description: string;
  }>;
  carTypes: Array<{
    name: string;
    model: string;
    capacity: string;
    seasonPrice: string;
    offSeasonPrice: string;
    image: string;
    features: string[];
  }>;
  attractions: Array<{
    name: string;
    description: string;
    image: string;
    highlights: string[];
  }>;
  faqs: Array<{
    question: string;
    answer: string;
  }>;
  pageContent: {
    title: string;
    description: string;
    metaDescription: string;
    keywords: string;
    introText1: string;
    introText2: string;
    attractionsTitle: string;
  };
  exclusions?: string[];
  packages?: {
    stayPackages?: Array<{
      name: string;
      description: string;
      seasonPrice: string;
      offSeasonPrice: string;
      popular?: boolean;
    }>;
    tourPackages?: Array<{
      name: string;
      subtitle: string;
      features: string[];
      price: string;
      popular?: boolean;
      image?: string;
    }>;
  };
  bookingSettings?: {
    upiQrCodeUrl?: string;
    upiId?: string;
    payeeName?: string;
    bookingTerms?: string;
    cancellationPolicy?: string;
    bookingHelpPhone?: string;
    bookingHelpWhatsapp?: string;
  };
  safetyBannerData?: {
    enabled?: boolean;
    backgroundColor?: string;
    badges?: Array<{
      text: string;
      icon: string;
    }>;
  };
}

const { routeData, heroSlides, carTypes, attractions, faqs, pageContent, exclusions, packages, bookingSettings, safetyBannerData } = Astro.props;

const whatsappNumber = bookingSettings?.bookingHelpWhatsapp || '917351721351';
const whatsappUrl = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(`Hi, I'd like to book a taxi from ${routeData.from} to ${routeData.to}`)}`;

// Prepare route data for the booking modal
const modalRouteData = {
  from: routeData.from,
  to: routeData.to,
  slug: routeData.slug,
  _id: routeData._id,
  carTypes: carTypes || []
};

const modalBookingSettings = {
  upiQrCodeUrl: bookingSettings?.upiQrCodeUrl,
  upiId: bookingSettings?.upiId,
  payeeName: bookingSettings?.payeeName,
  bookingTerms: bookingSettings?.bookingTerms,
  cancellationPolicy: bookingSettings?.cancellationPolicy,
  helpPhone: bookingSettings?.bookingHelpPhone,
  helpWhatsapp: bookingSettings?.bookingHelpWhatsapp
};

// Weather widget coordinates (format: lat/lon)
const weatherCoords = routeData.destinationLatitude && routeData.destinationLongitude
  ? `${routeData.destinationLatitude.toFixed(2)}/${routeData.destinationLongitude.toFixed(2)}`
  : null;

// Default Google Maps embed URL (fallback)
const defaultMapsUrl = "https://www.google.com/maps/embed?pb=!1m28!1m12!1m3!1d55449.89534378469!2d79.41936284863281!3d29.32368!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!4m13!3e0!4m5!1s0x39a09addbd0c86f1%3A0xbb3534201a6826a5!2sKathgodam%20Railway%20Station%2C%20Haldwani%2C%20Uttarakhand!3m2!1d29.2721774!2d79.53823699999999!4m5!1s0x39a0a0a2a7e0a7e7%3A0x2e9d0c0c0c0c0c0c!2sNainital%2C%20Uttarakhand!3m2!1d29.3803039!2d79.4636042!5e0!3m2!1sen!2sin!4v1234567890";
const mapsEmbedUrl = routeData.googleMapsEmbedUrl || defaultMapsUrl;
---

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{pageContent.title}</title>
  <meta name="description" content={pageContent.metaDescription} />
  <meta name="keywords" content={pageContent.keywords} />

  <!-- Open Graph -->
  <meta property="og:title" content={pageContent.title} />
  <meta property="og:description" content={pageContent.metaDescription} />
  <meta property="og:type" content="website" />

  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
</head>

<body class="antialiased">
  <!-- Navbar -->
  <Navbar />

  <!-- Main Content -->
  <main>
    <!-- Hero Slider -->
    <RouteHeroSlider
      from={routeData.from}
      to={routeData.to}
      distance={routeData.distance}
      duration={routeData.duration}
      startingPrice={routeData.startingPrice}
      slides={heroSlides}
      destinationLatitude={routeData.destinationLatitude}
      destinationLongitude={routeData.destinationLongitude}
    />

    <!-- Safety Banner -->
    <SafetyBanner data={safetyBannerData} />

    <!-- Route Overview Section -->
    <section class="py-12 bg-white">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="grid lg:grid-cols-3 gap-8">
          <!-- Main Content Column -->
          <div class="lg:col-span-2 space-y-12">
            <!-- Route Introduction -->
            <div>
              <h1 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">
                {routeData.from} to {routeData.to} Taxi Service
              </h1>
              <p class="text-lg text-gray-700 leading-relaxed mb-4" set:html={pageContent.introText1}>
              </p>
              <p class="text-lg text-gray-700 leading-relaxed" set:html={pageContent.introText2}>
              </p>
            </div>

            <!-- Quick Info Cards -->
            <div class="grid md:grid-cols-3 gap-4">
              <div class="bg-gradient-to-br from-primary-50 to-yellow-50 p-6 rounded-xl border border-primary-200">
                <div class="flex items-center mb-2">
                  <svg class="w-8 h-8 text-primary-600 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                  </svg>
                  <h3 class="text-2xl font-bold text-gray-900">{routeData.distance}</h3>
                </div>
                <p class="text-sm text-gray-600">Total Distance</p>
              </div>

              <div class="bg-gradient-to-br from-blue-50 to-cyan-50 p-6 rounded-xl border border-blue-200">
                <div class="flex items-center mb-2">
                  <svg class="w-8 h-8 text-blue-600 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                  </svg>
                  <h3 class="text-2xl font-bold text-gray-900">{routeData.duration}</h3>
                </div>
                <p class="text-sm text-gray-600">Journey Time</p>
              </div>

              <div class="bg-gradient-to-br from-green-50 to-emerald-50 p-6 rounded-xl border border-green-200">
                <div class="flex items-center mb-2">
                  <svg class="w-8 h-8 text-green-600 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                  </svg>
                  <h3 class="text-2xl font-bold text-gray-900">{routeData.startingPrice}+</h3>
                </div>
                <p class="text-sm text-gray-600">Starting Price</p>
              </div>
            </div>
          </div>

          <!-- Sticky Sidebar Column -->
          <div class="lg:col-span-1">
            <StickyBookingSidebar
              from={routeData.from}
              to={routeData.to}
              startingPrice={routeData.startingPrice}
              slug={routeData.slug}
              routeId={routeData._id}
              carTypes={carTypes}
              whatsappNumber={whatsappNumber}
            />
          </div>
        </div>
      </div>
    </section>

    <!-- Pricing Table -->
    <RoutePricingTable
      carTypes={carTypes}
      exclusions={exclusions}
      routeInfo={{
        from: routeData.from,
        to: routeData.to,
        slug: routeData.slug,
        routeId: routeData._id
      }}
    />

    <!-- Ready to Book CTA Section -->
    <section class="py-12 bg-gradient-to-r from-primary-500 via-yellow-500 to-primary-500">
      <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <h2 class="text-3xl md:text-4xl font-bold text-black mb-4">
          Ready to Book Your {routeData.from} to {routeData.to} Taxi?
        </h2>
        <p class="text-lg text-black/80 mb-8 max-w-2xl mx-auto">
          Choose your preferred way to book - Instant confirmation via WhatsApp, Call us directly, or Submit a detailed query for custom requirements.
        </p>
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <a
            href={whatsappUrl}
            target="_blank"
            rel="noopener noreferrer"
            class="inline-flex items-center justify-center bg-whatsapp text-white px-8 py-4 rounded-lg font-bold hover:bg-green-600 transition-all shadow-lg text-base"
          >
            <svg class="w-6 h-6 mr-2" fill="currentColor" viewBox="0 0 24 24">
              <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
            </svg>
            WhatsApp Booking
          </a>
          <a
            href="tel:+917351721351"
            class="inline-flex items-center justify-center bg-black text-white px-8 py-4 rounded-lg font-bold hover:bg-gray-900 transition-all shadow-lg text-base"
          >
            <svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
            </svg>
            Call: 7351721351
          </a>
          <a
            href="/contact"
            class="inline-flex items-center justify-center bg-white text-black px-8 py-4 rounded-lg font-bold hover:bg-gray-100 transition-all shadow-lg border-2 border-black text-base"
          >
            <svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
            </svg>
            Submit Query
          </a>
        </div>
        <p class="mt-6 text-black/70 text-sm">
          ✓ Fixed transparent pricing • ✓ No hidden charges • ✓ 24/7 customer support
        </p>
      </div>
    </section>

    <!-- Taxi Packages from Destination (Conditional) -->
    {packages?.tourPackages && packages.tourPackages.length > 0 && (
      <section class="py-12 bg-gradient-to-br from-gray-50 to-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div class="text-center mb-10">
            <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-3">
              Taxi Packages from {routeData.to}
            </h2>
            <p class="text-lg text-gray-600">
              Explore Kumaon with our specially curated multi-day tour packages
            </p>
          </div>

          <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
            {packages.tourPackages.map((pkg) => (
              <div class={`group bg-white border-2 ${pkg.popular ? 'border-primary-500 hover:border-primary-600' : 'border-gray-200 hover:border-primary-500'} rounded-xl overflow-hidden transition-all hover:shadow-xl relative`}>
                {pkg.popular && (
                  <div class="absolute top-0 right-0 bg-primary-500 text-black text-xs font-bold px-3 py-1 rounded-bl-lg z-10">
                    POPULAR
                  </div>
                )}

                {/* Package Image */}
                {pkg.image && (
                  <div class="relative h-48 overflow-hidden">
                    <img
                      src={pkg.image}
                      alt={pkg.name}
                      class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-110"
                    />
                    <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"></div>
                  </div>
                )}

                <div class={`${pkg.image ? 'bg-white' : 'bg-gradient-to-r from-primary-500 to-yellow-500'} p-4 text-center`}>
                  <h3 class={`text-xl font-bold ${pkg.image ? 'text-gray-900' : 'text-black'}`}>{pkg.name}</h3>
                  <p class={`text-sm ${pkg.image ? 'text-gray-600' : 'text-black/80'}`}>{pkg.subtitle}</p>
                </div>
                <div class="p-6">
                  <ul class="space-y-2 mb-4 text-sm text-gray-600">
                    {pkg.features.map((feature) => (
                      <li class="flex items-start">
                        <svg class="w-4 h-4 text-green-500 mr-2 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                          <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                        </svg>
                        <span>{feature}</span>
                      </li>
                    ))}
                  </ul>
                  <div class="border-t border-gray-200 pt-4 mb-4">
                    <p class="text-2xl font-bold text-primary-600 text-center">{pkg.price}</p>
                    <p class="text-xs text-gray-500 text-center mt-1">Per vehicle (up to 4 pax)</p>
                  </div>
                  <a href={whatsappUrl} target="_blank" rel="noopener noreferrer" class={`block w-full ${pkg.popular ? 'bg-primary-500 text-black hover:bg-primary-400' : 'bg-secondary-900 text-white hover:bg-secondary-800'} text-center py-3 rounded-lg font-semibold transition-colors`}>
                    Book Package
                  </a>
                </div>
              </div>
            ))}
          </div>

          <!-- Custom Package CTA -->
          <div class="mt-10 text-center">
            <p class="text-gray-600 mb-4 text-lg">
              Need a custom package? We can create personalized itineraries for your group!
            </p>
            <a
              href="/contact"
              class="inline-flex items-center bg-primary-500 text-black px-8 py-3 rounded-lg font-bold hover:bg-primary-400 transition-colors shadow-lg"
            >
              <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
              </svg>
              Request Custom Package
            </a>
          </div>
        </div>
      </section>
    )}

    <!-- Places Worth Seeing (Attractions Grid) -->
    {attractions && attractions.length > 0 && (
      <AttractionsGrid
        title={pageContent.attractionsTitle || `Places Worth Seeing in ${routeData.to}`}
        attractions={attractions}
      />
    )}

    <!-- Why Book With Us -->
    <section class="py-12 bg-white">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-10">
          <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-3">
            Why Book {routeData.from} to {routeData.to} Taxi With Us?
          </h2>
          <p class="text-lg text-gray-600">
            Your comfort and safety are our top priorities
          </p>
        </div>

        <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
          <div class="bg-gradient-to-br from-blue-50 to-cyan-50 p-6 rounded-xl border border-blue-200 text-center">
            <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
              <svg class="w-8 h-8 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
              </svg>
            </div>
            <h3 class="text-xl font-bold text-gray-900 mb-2">Fixed Pricing</h3>
            <p class="text-gray-600 text-sm">No bargaining, no hidden charges. What you see is what you pay.</p>
          </div>

          <div class="bg-gradient-to-br from-green-50 to-emerald-50 p-6 rounded-xl border border-green-200 text-center">
            <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
              <svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/>
              </svg>
            </div>
            <h3 class="text-xl font-bold text-gray-900 mb-2">Safe & Verified</h3>
            <p class="text-gray-600 text-sm">All drivers are verified, licensed, and experienced in mountain driving.</p>
          </div>

          <div class="bg-gradient-to-br from-purple-50 to-pink-50 p-6 rounded-xl border border-purple-200 text-center">
            <div class="w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4">
              <svg class="w-8 h-8 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
              </svg>
            </div>
            <h3 class="text-xl font-bold text-gray-900 mb-2">Clean Cars</h3>
            <p class="text-gray-600 text-sm">Well-maintained, sanitized AC vehicles for a comfortable journey.</p>
          </div>

          <div class="bg-gradient-to-br from-yellow-50 to-orange-50 p-6 rounded-xl border border-yellow-200 text-center">
            <div class="w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4">
              <svg class="w-8 h-8 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
              </svg>
            </div>
            <h3 class="text-xl font-bold text-gray-900 mb-2">24/7 Support</h3>
            <p class="text-gray-600 text-sm">Round-the-clock customer support for all your queries and bookings.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Route Map & FAQs Section (Side by Side) -->
    <section class="py-12 bg-gray-50">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="grid lg:grid-cols-2 gap-8">
          <!-- Google Maps -->
          <div>
            <h2 class="text-2xl font-bold text-gray-900 mb-4">Route from {routeData.from} to {routeData.to}</h2>
            <div class="bg-white rounded-xl overflow-hidden shadow-lg border border-gray-200">
              <iframe
                src={mapsEmbedUrl}
                width="100%"
                height="450"
                style="border:0;"
                allowfullscreen=""
                loading="lazy"
                referrerpolicy="no-referrer-when-downgrade"
                title={`Route from ${routeData.from} to ${routeData.to}`}
              ></iframe>
            </div>
          </div>

          <!-- FAQs -->
          <div>
            <h2 class="text-2xl font-bold text-gray-900 mb-4">Frequently Asked Questions</h2>
            {faqs && faqs.length > 0 ? (
              <div class="space-y-4">
                {faqs.map((faq, index) => (
                  <details class="group bg-white rounded-lg border border-gray-200 overflow-hidden">
                    <summary class="flex justify-between items-center cursor-pointer p-4 hover:bg-gray-50 transition-colors">
                      <h3 class="font-semibold text-gray-900 pr-4">{faq.question}</h3>
                      <svg class="w-5 h-5 text-gray-500 group-open:rotate-180 transition-transform flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                      </svg>
                    </summary>
                    <div class="p-4 pt-0 text-gray-600 leading-relaxed" set:html={faq.answer}>
                    </div>
                  </details>
                ))}
              </div>
            ) : (
              <div class="bg-white rounded-lg border border-gray-200 p-8 text-center text-gray-500">
                <p>No FAQs available for this route yet.</p>
              </div>
            )}
          </div>
        </div>
      </div>
    </section>

    <!-- Terms & Cancellation Policy Section -->
    <section id="terms-cancellation" class="py-12 bg-white">
      <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
        <h2 class="text-2xl font-bold text-gray-900 mb-6 text-center">Booking Terms & Cancellation Policy</h2>

        <div class="grid md:grid-cols-2 gap-8">
          <!-- Booking Terms -->
          <div class="bg-gray-50 rounded-xl p-6">
            <h3 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
              <svg class="w-5 h-5 text-amber-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
              </svg>
              Booking Terms
            </h3>
            {bookingSettings?.bookingTerms ? (
              <div class="text-sm text-gray-600 space-y-2 prose prose-sm" set:html={bookingSettings.bookingTerms} />
            ) : (
              <ul class="text-sm text-gray-600 space-y-2">
                <li class="flex items-start">
                  <svg class="w-4 h-4 text-green-500 mr-2 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                  </svg>
                  <span>Full payment required at the time of booking</span>
                </li>
                <li class="flex items-start">
                  <svg class="w-4 h-4 text-green-500 mr-2 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                  </svg>
                  <span>Booking confirmation sent via WhatsApp</span>
                </li>
                <li class="flex items-start">
                  <svg class="w-4 h-4 text-green-500 mr-2 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                  </svg>
                  <span>Driver details shared 2-4 hours before pickup</span>
                </li>
                <li class="flex items-start">
                  <svg class="w-4 h-4 text-green-500 mr-2 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                  </svg>
                  <span>Online booking available for 5 AM - 3 PM pickup</span>
                </li>
                <li class="flex items-start">
                  <svg class="w-4 h-4 text-green-500 mr-2 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                  </svg>
                  <span>Prices are fixed - no bargaining required</span>
                </li>
              </ul>
            )}
          </div>

          <!-- Cancellation Policy -->
          <div class="bg-gray-50 rounded-xl p-6">
            <h3 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
              <svg class="w-5 h-5 text-red-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
              </svg>
              Cancellation Policy
            </h3>
            {bookingSettings?.cancellationPolicy ? (
              <div class="text-sm text-gray-600 space-y-2 prose prose-sm" set:html={bookingSettings.cancellationPolicy} />
            ) : (
              <ul class="text-sm text-gray-600 space-y-2">
                <li class="flex items-start">
                  <svg class="w-4 h-4 text-amber-500 mr-2 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"/>
                  </svg>
                  <span><strong>24+ hours before:</strong> Full refund</span>
                </li>
                <li class="flex items-start">
                  <svg class="w-4 h-4 text-amber-500 mr-2 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"/>
                  </svg>
                  <span><strong>12-24 hours before:</strong> 50% refund</span>
                </li>
                <li class="flex items-start">
                  <svg class="w-4 h-4 text-red-500 mr-2 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"/>
                  </svg>
                  <span><strong>Less than 12 hours:</strong> No refund</span>
                </li>
                <li class="flex items-start">
                  <svg class="w-4 h-4 text-blue-500 mr-2 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/>
                  </svg>
                  <span>Refunds processed within 3-5 business days</span>
                </li>
              </ul>
            )}
          </div>
        </div>

        <!-- Contact for Questions -->
        <div class="mt-8 text-center">
          <p class="text-gray-600 mb-4">Have questions about our terms?</p>
          <a
            href={whatsappUrl}
            target="_blank"
            rel="noopener noreferrer"
            class="inline-flex items-center px-6 py-3 bg-green-500 text-white font-semibold rounded-lg hover:bg-green-600 transition-colors"
          >
            <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 24 24">
              <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
            </svg>
            Contact Us on WhatsApp
          </a>
        </div>
      </div>
    </section>
  </main>

  <!-- Booking Modal -->
  <BookingModalContainer
    client:only="react"
    routeData={modalRouteData}
    bookingSettings={modalBookingSettings}
  />

  <!-- Footer -->
  <Footer />

  <style>
    html {
      scroll-behavior: smooth;
    }

    main {
      margin-top: 64px;
    }

    @media (min-width: 768px) {
      main {
        margin-top: 80px;
      }
    }
  </style>
</body>
</html>
