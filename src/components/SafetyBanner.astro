---
interface Props {
  data?: {
    enabled?: boolean;
    backgroundColor?: string;
    badges?: Array<{
      text: string;
      icon: string;
    }>;
  };
}

const { data } = Astro.props;

// Don't render if explicitly disabled
if (data?.enabled === false) {
  return null;
}

const backgroundColor = data?.backgroundColor || 'gradient-green';

const defaultBadges = [
  { text: 'Verified Drivers', icon: 'userCheck' },
  { text: 'No Alcohol Policy', icon: 'noAlcohol' },
  { text: '15+ Years Experience', icon: 'star' },
  { text: 'GPS Tracked', icon: 'gps' },
  { text: '24/7 Support', icon: 'clock' },
];

const badges = data?.badges && data.badges.length > 0 ? data.badges : defaultBadges;

// Background styles mapping
const bgStyles: Record<string, string> = {
  'gradient-green': 'background: linear-gradient(90deg, #16a34a 0%, #059669 50%, #0d9488 100%); color: white;',
  'solid-green': 'background-color: #16a34a; color: white;',
  'dark': 'background-color: #1f2937; color: white;',
  'light': 'background-color: white; color: #374151; border-top: 1px solid #d1fae5; border-bottom: 1px solid #d1fae5;',
};

const bgStyle = bgStyles[backgroundColor] || bgStyles['gradient-green'];
const isLight = backgroundColor === 'light';
---

<div class="py-3" style={bgStyle}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex flex-wrap justify-center items-center gap-x-6 gap-y-2 text-sm font-medium">
      {badges.map((badge, index) => (
        <div class="flex items-center gap-1.5">
          <span class={isLight ? 'text-green-600' : 'text-green-200'}>
            {badge.icon === 'shield' && (
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/>
              </svg>
            )}
            {badge.icon === 'checkCircle' && (
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
              </svg>
            )}
            {badge.icon === 'userCheck' && (
              <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd"/>
              </svg>
            )}
            {badge.icon === 'noAlcohol' && (
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="9" stroke-width="2"/>
                <path stroke-linecap="round" stroke-width="2" d="M5.5 5.5l13 13"/>
              </svg>
            )}
            {badge.icon === 'star' && (
              <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
              </svg>
            )}
            {badge.icon === 'clock' && (
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
              </svg>
            )}
            {badge.icon === 'gps' && (
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
              </svg>
            )}
            {!['shield', 'checkCircle', 'userCheck', 'noAlcohol', 'star', 'clock', 'gps'].includes(badge.icon) && (
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
              </svg>
            )}
          </span>
          <span>{badge.text}</span>
          {index < badges.length - 1 && (
            <span class={`hidden sm:inline ml-4 ${isLight ? 'text-gray-300' : 'text-white/30'}`}>|</span>
          )}
        </div>
      ))}
    </div>
  </div>
</div>
